<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket Test</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
  </head>
  <body>
    <h3>Spring WebSocket Test</h3>
    <script>
      var socket = new SockJS("http://localhost:8080/chat-ws");
      var stompClient = Stomp.over(socket);

      stompClient.connect({}, function (frame) {
        console.log("‚úÖ Connected: " + frame);

        stompClient.subscribe("/topic/public", function (message) {
          console.log("üì© Received: ", message.body);
        });

        stompClient.send("/app/sendMessage", {}, JSON.stringify({
          sender: "Kamal",
          content: "Hello, testing WebSocket!",
          type: "CHAT"
        }));
      }, function (error) {
        console.error("‚ùå Connection error:", error);
      });
    </script>
  </body>
</html>
